/* RESET + BASE ------------------------------------------------ */
* { box-sizing: border-box; }
html { -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; }
body {
    margin: 0;
    font-family: var(--font-text);
    background: var(--gradient-bg);
    color: var(--text-high);
    line-height: 1.55;
    font-size: 16px;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
}

/* ACCESSIBILITY LINKS / NEW COMPONENTS ----------------------- */
.skip-link { position:absolute; left:-999px; top:0; background: var(--primary); color: var(--bg); padding:8px 14px; z-index:1000; border-radius:0 0 var(--radius-sm) var(--radius-sm); font-weight:600; }
.skip-link:focus { left:0; box-shadow: var(--focus-ring); }

.steps { list-style: decimal; display:grid; gap: var(--spacing-16); margin:0; padding-left:1.25rem; font-size:.95rem; counter-reset: step; }
.steps li { position:relative; padding-left:.1rem; }
.steps li strong { color: var(--primary); }

details { background: linear-gradient(145deg,var(--surface),var(--card)); border:1px solid var(--stroke); border-radius: var(--radius-md); padding: var(--spacing-16) var(--spacing-20); box-shadow: var(--shadow-sm); transition: border-color var(--transition-fast), background var(--transition-fast); }
details + details { margin-top: var(--spacing-12); }
details[open] { border-color: var(--primary); }
details summary { cursor:pointer; list-style:none; font-weight:600; color: var(--text-high); position:relative; }
details summary::-webkit-details-marker { display:none; }
details summary:focus-visible { outline:none; box-shadow: var(--focus-ring); border-radius: var(--radius-sm); }
details p { margin-top: var(--spacing-12); font-size:.9rem; }

::selection { background: var(--primary); color: var(--bg); }

h1,h2,h3,h4 { font-family: var(--font-title); font-weight: 700; letter-spacing: .5px; }
h1 { font-size: clamp(2.2rem, 4vw, 3rem); line-height: 1.1; margin: 0 0 var(--spacing-24); background: var(--gradient-accent); -webkit-background-clip: text; background-clip: text; color: transparent; }
h2 { font-size: clamp(1.5rem, 2.5vw, 2rem); margin: 0 0 var(--spacing-16); }
h3 { font-size: 1.25rem; margin: 0 0 var(--spacing-12); }
p { margin: 0 0 var(--spacing-16); color: var(--text-med); }
a { color: var(--accent); text-decoration: none; position: relative; }
a::after { content:""; position:absolute; left:0; bottom:-2px; width:0; height:2px; background: var(--accent); transition: width var(--transition-fast); }
a:hover::after, a:focus-visible::after { width:100%; }

/* LAYOUT ------------------------------------------------------ */
header { position:sticky; top:0; z-index:50; backdrop-filter: var(--backdrop-blur); background: linear-gradient(90deg, rgba(18,23,35,0.85), rgba(21,27,44,0.6)); border-bottom:1px solid var(--stroke-alt); }
nav { max-width: var(--max-width); margin:0 auto; display:flex; align-items:center; gap: var(--spacing-8); padding: 0 var(--spacing-24); height: var(--nav-height); }
nav a { --pad: 10px 18px; padding: var(--pad); font-weight:500; font-size:.9rem; color: var(--text-low); border-radius: var(--radius-pill); position:relative; transition: color var(--transition-fast), background var(--transition-fast); }
nav a:hover, nav a:focus-visible { color: var(--text-high); background: rgba(124,158,255,0.08); }
nav a.active { background: rgba(124,158,255,0.15); color: var(--primary); }

main { flex:1 0 auto; width:100%; max-width: var(--max-width); margin:0 auto; padding: clamp(var(--spacing-24),4vw,var(--spacing-48)) var(--spacing-24) var(--spacing-64); }
footer { border-top:1px solid var(--stroke-alt); background: linear-gradient(180deg, rgba(21,27,44,0.9), rgba(13,15,20,0.95)); padding: var(--spacing-32) var(--spacing-24); text-align:center; font-size:.85rem; color: var(--text-low); }
footer p { color: var(--text-low); }

/* GRID HELPERS */
.auto-grid { --min: 240px; display:grid; gap: var(--spacing-24); grid-template-columns: repeat(auto-fill,minmax(var(--min),1fr)); }
.stack-sm > * + * { margin-top: var(--spacing-8); }
.stack-md > * + * { margin-top: var(--spacing-16); }

/* CARDS ------------------------------------------------------- */
.card { background: linear-gradient(145deg, var(--surface) 0%, var(--card) 100%); border:1px solid var(--stroke); border-radius: var(--radius-lg); padding: var(--spacing-24); position:relative; box-shadow: var(--shadow-sm); overflow:hidden; transition: border-color var(--transition), transform var(--transition), box-shadow var(--transition); }
.card::before { content:""; position:absolute; inset:0; background: radial-gradient(circle at 30% 20%, rgba(124,158,255,0.08), transparent 60%); opacity:0; transition: opacity var(--transition); pointer-events:none; }
.card:hover { border-color: var(--primary); transform: translateY(-4px); box-shadow: var(--shadow-lg), 0 0 0 1px rgba(124,158,255,0.12); }
.card:hover::before { opacity:1; }
.card h3 { margin-top:0; }

/* GLASS PANEL / SECTIONS ------------------------------------- */
.panel { background: var(--card-glass); backdrop-filter: var(--backdrop-blur); border:1px solid var(--stroke); border-radius: var(--radius-lg); padding: clamp(var(--spacing-20),3vw,var(--spacing-32)); box-shadow: var(--shadow-md); position:relative; overflow:hidden; }
.panel::after { content:""; position:absolute; inset:0; pointer-events:none; background: linear-gradient(120deg, rgba(124,158,255,0.08), transparent 70%); mix-blend-mode: overlay; opacity:.6; }

/* HERO -------------------------------------------------------- */
.hero { text-align:center; padding: clamp(var(--spacing-48),12vw,var(--spacing-64)) var(--spacing-16) var(--spacing-32); position:relative; }
.hero::before { content:""; position:absolute; inset:0; background: radial-gradient(circle at 50% 0%, rgba(124,158,255,0.25), transparent 60%); opacity:.4; pointer-events:none; }
.hero .cta-row { margin-top: var(--spacing-32); display:flex; flex-wrap:wrap; gap: var(--spacing-16); justify-content:center; }
.hero .cta-row { background: rgba(0,0,0,0.15); backdrop-filter: blur(6px); padding: 10px 14px; border:1px solid var(--stroke); border-radius: var(--radius-pill); box-shadow: var(--shadow-sm); }
#mini-stats .card { text-align:center; }
#mini-stats canvas { width:100%; height:auto; display:block; }
.quick-mood { display:flex; gap:10px; justify-content:center; }
.quick-mood .qm { background: linear-gradient(145deg,var(--surface-alt),var(--surface)); border:1px solid var(--stroke); width:54px; height:54px; border-radius:14px; font-size:1.6rem; cursor:pointer; transition: transform var(--transition-fast), border-color var(--transition-fast); }
.quick-mood .qm:hover, .quick-mood .qm:focus-visible { transform: translateY(-4px); border-color: var(--primary); }

/* Accessibility themes */
.high-contrast body { filter:contrast(1.25) brightness(1.05); }
.color-blind { --primary:#0072B2; --accent:#E69F00; --warn:#CC79A7; }

/* BUTTONS ----------------------------------------------------- */
.btn, button { --btn-bg: var(--primary); --btn-fg: var(--bg); cursor:pointer; font-family: var(--font-text); font-weight:600; letter-spacing:.5px; border:none; border-radius: var(--radius-pill); position:relative; display:inline-flex; align-items:center; gap: var(--spacing-8); padding: 14px 26px; font-size:.95rem; line-height:1; background: linear-gradient(135deg,var(--btn-bg),var(--accent)); color: var(--btn-fg); box-shadow: 0 4px 18px -4px rgba(0,0,0,0.6), 0 0 0 0 rgba(124,158,255,0.4); transition: box-shadow var(--transition), transform var(--transition), filter var(--transition); }
.btn:hover, .btn:focus-visible, button:hover, button:focus-visible { transform: translateY(-3px); box-shadow: 0 8px 28px -6px rgba(0,0,0,0.7), 0 0 0 3px rgba(124,158,255,0.25); }
.btn:active { transform: translateY(0); }
.btn.outline { background: transparent; color: var(--primary); border:1px solid var(--primary); }
.btn.outline:hover { background: linear-gradient(135deg, rgba(124,158,255,0.15), rgba(89,213,201,0.15)); }
.btn.subtle { background: linear-gradient(145deg, var(--surface-alt), var(--surface)); color: var(--text-med); }
.btn.subtle:hover { color: var(--text-high); }
button:disabled, .btn:disabled { opacity:.55; cursor:not-allowed; transform:none; box-shadow:none; }

/* FORMS ------------------------------------------------------- */
form { display:grid; gap: var(--spacing-20); background: linear-gradient(145deg,var(--surface-alt),var(--surface)); padding: clamp(var(--spacing-24),3vw,var(--spacing-40)); border:1px solid var(--stroke); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); }
label { font-size:.8rem; text-transform:uppercase; letter-spacing: .08em; font-weight:600; color: var(--text-low); display:block; margin-bottom: var(--spacing-6); }
input, textarea, select { font: inherit; border:1px solid var(--stroke); background: linear-gradient(145deg,var(--card),var(--surface)); color: var(--text-high); padding: 14px 16px; border-radius: var(--radius-sm); resize: vertical; transition: border-color var(--transition-fast), background var(--transition-fast), box-shadow var(--transition-fast); }
input:hover, textarea:hover, select:hover { border-color: var(--stroke-alt); }
input:focus-visible, textarea:focus-visible, select:focus-visible { outline:none; border-color: var(--primary); box-shadow: var(--focus-ring); }
input[type=range] { width:100%; background: transparent; padding:0; }
input[type=range]::-webkit-slider-runnable-track { height:6px; border-radius:4px; background: linear-gradient(90deg,var(--primary) 0%, var(--accent) 100%); }
input[type=range]::-webkit-slider-thumb { -webkit-appearance:none; width:20px; height:20px; margin-top:-7px; background: var(--bg); border:3px solid var(--primary); border-radius:50%; box-shadow: 0 2px 6px rgba(0,0,0,0.6); transition: transform var(--transition-fast), border-color var(--transition-fast); }
input[type=range]:focus-visible::-webkit-slider-thumb, input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.15); border-color: var(--accent); }
fieldset { border:1px solid var(--stroke); padding: var(--spacing-16) var(--spacing-20) var(--spacing-12); border-radius: var(--radius-md); position:relative; background: linear-gradient(145deg,var(--card),var(--surface-alt)); }
legend { padding:0 6px; font-size:.7rem; letter-spacing:.1em; text-transform:uppercase; color: var(--text-low); }
textarea { min-height: 110px; }

/* QUIZ -------------------------------------------------------- */
#quiz-container { display:grid; gap: var(--spacing-24); background: linear-gradient(145deg,var(--surface),var(--surface-alt)); padding: clamp(var(--spacing-24),3vw,var(--spacing-40)); border:1px solid var(--stroke); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); position:relative; overflow:hidden; }
#quiz-container::before { content:""; position:absolute; inset:0; background: radial-gradient(circle at 85% 15%, rgba(124,158,255,0.18), transparent 70%); opacity:.6; pointer-events:none; }
#options label { display:flex; align-items:center; gap: var(--spacing-12); font-weight:500; background: linear-gradient(145deg,var(--card),var(--surface-alt)); border:1px solid var(--stroke); padding:14px 18px; border-radius: var(--radius-md); margin-bottom: var(--spacing-12); cursor:pointer; position:relative; overflow:hidden; transition: border-color var(--transition-fast), background var(--transition-fast), transform var(--transition-fast); }
#options label:hover { border-color: var(--primary); background: linear-gradient(145deg,var(--surface),var(--surface-alt)); }
#options input[type=radio] { accent-color: var(--primary); transform: scale(1.2); }
#progress { font-size:.75rem; letter-spacing:.1em; font-weight:600; color: var(--text-low); text-transform:uppercase; }
#result { background: linear-gradient(145deg,var(--surface),var(--card)); padding: var(--spacing-32); border:1px solid var(--stroke); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); }

/* TIMERS / TECHNIQUES ---------------------------------------- */
#timer-display, #pomodoro-timer { font-family: var(--font-mono); font-size: clamp(1.75rem,4vw,2.6rem); letter-spacing:1px; background: linear-gradient(145deg,var(--surface),var(--card)); padding: 20px 28px; border:1px solid var(--stroke); border-radius: var(--radius-md); display:inline-block; min-width:200px; text-align:center; box-shadow: var(--shadow-sm); }
.stretch-card { position:relative; display:grid; gap: var(--spacing-12); background: linear-gradient(160deg,var(--surface),var(--card)); padding: var(--spacing-20) var(--spacing-20) var(--spacing-24); border:1px solid var(--stroke); border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); transition: transform var(--transition), border-color var(--transition), box-shadow var(--transition); }
.stretch-card:hover { transform: translateY(-4px); border-color: var(--primary); box-shadow: var(--shadow-lg); }
.stretch-card img { width:56px; height:56px; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.5)); }

/* RESULTADOS / TIMELINE -------------------------------------- */
#timeline-container { display:flex; gap: var(--spacing-12); overflow-x:auto; padding: var(--spacing-12) 4px var(--spacing-4); scrollbar-width: thin; scrollbar-color: var(--stroke) transparent; }
#timeline-container::-webkit-scrollbar { height:10px; }
#timeline-container::-webkit-scrollbar-track { background: transparent; }
#timeline-container::-webkit-scrollbar-thumb { background: linear-gradient(var(--surface-alt), var(--stroke)); border-radius: 6px; }
.timeline-item { flex:0 0 140px; background: linear-gradient(155deg,var(--surface),var(--card)); border:1px solid var(--stroke); border-radius: var(--radius-md); padding: var(--spacing-16) var(--spacing-12); font-size:.75rem; display:grid; gap: var(--spacing-6); box-shadow: var(--shadow-sm); position:relative; transition: transform var(--transition), border-color var(--transition); }
.timeline-item:hover { transform: translateY(-6px); border-color: var(--primary); }
.timeline-item div:first-child { font-weight:600; color: var(--accent); font-size:.7rem; letter-spacing:.08em; }

/* TOAST & MODAL ---------------------------------------------- */
#toast { position: fixed; bottom: var(--spacing-32); right: var(--spacing-32); background: linear-gradient(135deg, var(--accent), var(--primary)); color: var(--bg); padding: 16px 22px; border-radius: var(--radius-pill); font-weight:600; font-size:.9rem; box-shadow: var(--shadow-lg); display:none; animation: toastIn .6s var(--transition) forwards; z-index:1000; }
@keyframes toastIn { 0% { transform: translateY(20px) scale(.9); opacity:0; } 100% { transform: translateY(0) scale(1); opacity:1; } }
.modal { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(8,10,14,0.75); backdrop-filter: blur(10px); z-index:1200; padding: var(--spacing-24); }
.modal-content { background: linear-gradient(145deg,var(--surface),var(--card)); border:1px solid var(--stroke); border-radius: var(--radius-lg); padding: clamp(var(--spacing-24),4vw,var(--spacing-40)); width:100%; max-width:460px; box-shadow: var(--shadow-lg); animation: scaleIn .5s var(--transition); }
@keyframes scaleIn { 0% { transform: translateY(14px) scale(.92); opacity:0; } 100% { transform: translateY(0) scale(1); opacity:1; } }

/* CALM MODE --------------------------------------------------- */
.calm { --gradient-bg: radial-gradient(circle at 50% 50%, #121b29 0%, #0D0F14 70%); filter: saturate(.75) brightness(.85); }
.calm header, .calm footer { opacity:.2; transition: opacity 600ms ease; }
.calm:hover header, .calm:hover footer { opacity:1; }

/* ANIMATIONS / INTERACTIONS ---------------------------------- */
@media (prefers-reduced-motion: no-preference) {
    .btn, button, .card, .stretch-card, .timeline-item { will-change: transform; }
}

/* ACCESSIBILITY / UTILS -------------------------------------- */
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
:focus-visible { outline:none; box-shadow: var(--focus-ring); }

/* RESPONSIVE -------------------------------------------------- */
@media (max-width: 900px) {
    nav { gap: var(--spacing-4); }
    .hero { padding-top: var(--spacing-64); }
}
@media (max-width: 680px) {
    nav { flex-wrap:wrap; justify-content:center; height:auto; padding-top: var(--spacing-12); padding-bottom: var(--spacing-12); }
    #timer-display, #pomodoro-timer { font-size: clamp(1.6rem,8vw,2.2rem); }
    .timeline-item { flex:0 0 120px; }
}

/* REDUCED MOTION --------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
    * { animation-duration: 0.001ms !important; animation-iteration-count:1 !important; transition-duration:0.001ms !important; scroll-behavior:auto !important; }
}
